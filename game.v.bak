module game(input clk, input rst, input [3:0]choice, output reg [1152] frame);

[2:0]S;
[2:0]NS;
[2:0]LS;

always@(posedge clk or negedge rst)
begin
    if (rst == 1'b0)
    begin
        S <= START;
        LS <= START;
    end
    else
        S <= NS;
end

reg userInput;

parameter START = 3'd0,
          firstChoice = 3'd1,
          secondChoice = 3'd2,
          thirdChoice = 3'd3,
          fourthChoice = 3'd4,
          ending       = 3'd5,
          confirmInput = 3'd6;

always@(*)
begin
    case(S)
        START: 
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = START;
        end
        firstChoice:
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = firstChoice;
        end
        secondChoice:
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = secondChoice;
        end
        thirdChoice:
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = thirdChoice;
        end
        fourthChoice:
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = fourthChoice;
        end
        ending:
        begin
            if (userInput == 1'b1)
                NS = confirmInput;
            else    
                NS = ending;
        end
        confirmInput:
        begin
            if (userInput == 1'b0)
            begin
                case(LS)
                    START: NS = firstChoice;
                    firstChoice: NS = secondChoice;
                    secondChoice: NS = thirdChoice;
                    thirdChoice: NS = fourthChoice;
                    fourthChoice: NS = ending;
                    ending: NS = START;
                endcase
            end
            else
                NS = confirmInput;
        end
    endcase
end

always@(posedge clk or negedge rst)
begin
    if (rst == 1'b0)
    begin
        frame <= 1152'b011000000001000001011000001000011100001100000010000100110001110010110100001110000100001111000101110000000000110010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110;
    end
    else
    begin
        case(S)
            START:
            begin
                frame <= 1152'b011000000001000001011000001000011100001100000010000100110001110010110100001110000100001111000101110000000000110010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110100011010001101000110;
            end
        endcase
    end
end

always@(*) {
    case(choice)
    4'b0001: userInput = 1'b1;
    4'b0010: userInput = 1'b1;
    4'b0100: userInput = 1'b1;
    4'b1000: userInput = 1'b1;
    default: userInput = 1'b0;
    endcase
}

endmodule